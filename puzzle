import os
import sys
import random
import pygame

'''blank block move left'''
def Right(screen, void, col):
    if void % col == 0:
        return void
    screen[void-1], screen[void] = screen[void], screen[void-1]
    return void - 1
    
'''blank block move right'''
def Left(screen, void, col):
    if (void+1) % col == 0:
        return void
    screen[void+1], screen[void] = screen[void], screen[void+1]
    return void + 1

'''blank block move up'''
def Down(screen, void, col):
        if void < col:
            return void
        screen[void-1], screen[void] = screen[void], screen[void-col]
        return void - col

'''blank block move down'''
def Up(screen, void, row, col):
        if void >= (row-1) * col:
            return void
        screen[void+col], screen[void] = screen[void], screen[void+col]
        return void + col

def Mix(row, col, grid):
    #Rearrange the blocks
    screen = []
    for i in range(grid):
        screen.append(i)
    # create a void block in the right corner
    void = grid - 1
    screen[void] = -1
    for i in range(10):
        direction = random.randint(0, 3)
        #move to the left
        if direction == 0:
            void = Left(screen, void, col)
        #move to the right
        elif direction == 1:
            void = Right(screen, void, col)
        #move up
        elif direction == 2:
            void = Up(screen, void, row, col)
        #move down
        elif direction == 3:
            void = Down(screen, void, col)
    return screen, void
    
'''choose image randomly'''
def Chosepicture(path):
    picturename = os.listdir(picture_path)
    # verify whether there is a picture
    # the image save path is same as the program path, convenient to get the path
    # then get the image path
    if len(picturename) > 0:
        return os.path.join(picture_path, random.choice(picturename))
        
        
'''Game Ending'''
def Endpart(window, width, height):
    black = (255,255,255)
    red = (255, 0, 0)
    purple = (255,0,255)
    window.fill(black)
    #save the fonts and picture into resources
    fontpath = os.path.join(os.getcwd(), 'resources/font/JDJYZHONG.TTF')
    #set font size
    font1 = pygame.font.Font(fontpath, width // 10)
    font2 = pygame.font.Font(fontpath, width // 20)
    font3 = pygame.font.Font(fontpath, width // 20)
    #set colors and 
    one = font1.render('Game Over', True, purple)
    two = font2.render('Contratulations!', True, red)
    three = font3.render('Well Done!', True, red)
    #Set the location for 
    #Game Over
    onerect = one.get_rect()
    onerect.midtop = (width / 2, height / 10)
    #Set the location for Congratulations!
    tworect = two.get_rect()
    tworect.midtop = (width / 2, height / 2)
    #Set the location for Well Done!
    threerect = three.get_rect()
    threerect.midtop = (width / 2, height / 1.5)
    #Display the messeages
    window.blit(one, onerect)
    window.blit(two, tworect)
    window.blit(three, threerect)
    pygame.display.update()
  
        
